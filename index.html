<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>physics@iitm by rahulporuri</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">physics@iitm</h1>
      <h2 class="project-tagline">the network of physicists at IIT Madras</h2>
      <a href="https://github.com/rahulporuri/physics-iitm" class="btn">View on GitHub</a>
    </section>

    <section class="main-content">
<style>

.node {
  stroke: #fff;
  stroke-width: 1.5px;
}

.link {
  stroke: #999;
  stroke-opacity: .6;
}

</style>
<script type="text/javascript" src="d3.v3.js"></script>
<script>

var width = 1200,
    height = 1500;

var color = d3.scale.category20();

var force = d3.layout.force()
    .charge(-70)
    .linkDistance(30)
    .size([width, height]);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("force.json", function(error, graph) {
  if (error) throw error;

  force
      .nodes(graph.nodes)
      .links(graph.links)
      .start();

  var link = svg.selectAll(".link")
      .data(graph.links)
    .enter().append("line")
      .attr("class", "link")
      .style("stroke-width", function(d) { return Math.sqrt(d.value); });

  var node = svg.selectAll(".node")
      .data(graph.nodes)
    .enter().append("circle")
      .attr("class", "node")
      .attr("r", 5)
      .style("fill", function(d) { return color(d.group); })
      .call(force.drag);

  node.append("title")
      .text(function(d) { return d.name; });

  force.on("tick", function() {
    link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

    node.attr("cx", function(d) { return d.x; })
        .attr("cy", function(d) { return d.y; });
  });
});

</script>
      <h3>

<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What?</h3>

      <p> A network of colleagues. A family network. A network of friends. All of us are part of various
      networks. And I find these networks interesting. For example, insights into your extended network
      of colleagues might very well get you your next job. Knowing the network of your family might
      introduce you to someone in the family you never knew about. In the same gist, faculty in a university
      form a network. They collaborate with each other and teach together. Such a network of faculty in
      the Department of Physics at the Indian Institute of Technology Madras is what I am interested in here.</p>

      <h3>

<a id="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why?</h3>

      <p> I can give you many reasons for Why I am interested in such a network of physicists but the first
      and foremost reason would be to understand how the network evolves. The same way each university is
      made up of departments, each department is made up of numerous labs headed by faculty. Depending on the
      faculty, some labs might choose to collaborate with one another. Such collaborations can be better understood
      from networks.</p>

      <p>Secondly, labs evolve, in the sense that undergraduate and graduate students work in the labs over
      the course of their college life, part of which includes publishing papers in Journals and Conferences.</p>

      <p>This evolution of a lab, a department and a university are interesting to me and that's why.</p>

      <p>As I mentioned earlier, understanding such networks can help you in ways you couldn't have imagined. 
      In the same light, understanding the network of a department can/might help the individual faculty
      members find possible collaborators pursuing similar work.</p>

<h3>
<a id="designer-templates" class="anchor" href="#designer-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How?</h3>

<p> As I mentioned earlier, each lab is made up of faculty, graduate and under-graduate students and various other
people helping take care of the lab's day-to-day. The pursuit of a research goal and common academic interests
is what brought these people together in the lab. A common outcome of such a pursuit are papers in Journals and
Conferences. Note that papers are not the only indicator of research being pursued but it has become an indicator
of a researcher's career. Such papers are what I used to create this network of faculty members in the Physics 
department at IIT Madras.</p>

<p> Take a look at the <a href="https://physics.iitm.ac.in/researchinfo">Recent Publications</a> page 
of the Dept. of Physics, IIT Madras. If not all, this seems to be a list of papers that have been
published by various faculty and their labs. You can see that one of the columns in the table is the
list of authors on a particular paper. These lists of authors are what I use to generate my network.</p>

<p>Below you will find the exact code I used to extract the author list on various papers from that
webpage and make a network. In the end, once I generate an appropriate network/graph, I saved the
network in a file, <code>force.json</code>. I then used D3 to load and visualize the network.</p>

<p>Note that there are errenous nodes in the network/graph you see below. I am working on cleaning it
up and removing any such errors. Also note that the network you see below is made up of ~180 papers
or 6 pages. A network made up of the authors from the full ~900 papers available on the webpage
would be too big to visualize here.</p>

<p>Hover over the individual nodes/points on the network and the name of the faculty/student will
be displayed. As always, I would love to hear any comments/feedback from you. Please 
<a href="https://github.com/rahulporuri/physics-iitm">create an issue</a> on the github repository
with your comments and feedback or critique. Thank you.</p>

<!-- HTML generated using hilite.me -->
<div style="background: #ffffff; border-width: 0.1em 0.1em 0.1em 0.8em; border: solid gray; overflow: auto; padding: 0.2em 0.6em; width: auto;">
<table><tbody>
<tr><td><pre style="line-height: 125%; margin: 0;">
 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
</td><td><pre style="line-height: 125%; margin: 0;"><span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">json</span>

<span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">pandas</span>
<span style="color: #008800; font-weight: bold;">import</span> <span style="color: #0e84b5; font-weight: bold;">networkx</span> <span style="color: #008800; font-weight: bold;">as</span> <span style="color: #0e84b5; font-weight: bold;">nx</span>
<span style="color: #008800; font-weight: bold;">from</span> <span style="color: #0e84b5; font-weight: bold;">networkx.readwrite</span> <span style="color: #008800; font-weight: bold;">import</span> json_graph


url_template <span style="color: #333333;">=</span> <span style="background-color: #fff0f0;">'https://physics.iitm.ac.in/researchinfo?page={}'</span>
authorlist <span style="color: #333333;">=</span> []


<span style="color: #888888;"># change 8 to 30 for the full ~900 papers</span>
<span style="color: #008800; font-weight: bold;">for</span> i <span style="color: black; font-weight: bold;">in</span> <span style="color: #007020;">range</span>(<span style="color: #0000dd; font-weight: bold;">8</span>):
    <span style="color: #888888;"># we can pass a url as the first argument to pandas.read_html</span>
    <span style="color: #888888;"># and it returns a list of data frames</span>
    df_list <span style="color: #333333;">=</span> pandas<span style="color: #333333;">.</span>read_html(url_template<span style="color: #333333;">.</span>format(i),
                               header<span style="color: #333333;">=</span><span style="color: #0000dd; font-weight: bold;">0</span>,
                               index_col<span style="color: #333333;">=</span><span style="color: #0000dd; font-weight: bold;">0</span>
    )
    df <span style="color: #333333;">=</span> df_list[<span style="color: #0000dd; font-weight: bold;">0</span>]

    <span style="color: #888888;"># column containing author names needs to be cleaned</span>
    df<span style="color: #333333;">.</span>Authors <span style="color: #333333;">=</span> df<span style="color: #333333;">.</span>Authors<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>lower()
    df<span style="color: #333333;">.</span>Authors <span style="color: #333333;">=</span> df<span style="color: #333333;">.</span>Authors<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>strip()
    df<span style="color: #333333;">.</span>Authors <span style="color: #333333;">=</span> df<span style="color: #333333;">.</span>Authors<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>replace(<span style="background-color: #fff0f0;">'*'</span>, <span style="background-color: #fff0f0;">' '</span>)
    df<span style="color: #333333;">.</span>Authors <span style="color: #333333;">=</span> df<span style="color: #333333;">.</span>Authors<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>replace(<span style="background-color: #fff0f0;">'and '</span>, <span style="background-color: #fff0f0;">','</span>)
    df<span style="color: #333333;">.</span>Authors <span style="color: #333333;">=</span> df<span style="color: #333333;">.</span>Authors<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>replace(<span style="background-color: #fff0f0;">'&amp;'</span>, <span style="background-color: #fff0f0;">','</span>)

    <span style="color: #888888;"># Split column containing authors on ","</span>
    <span style="color: #888888;"># split is a data frame i.e 2D array</span>
    split <span style="color: #333333;">=</span> df[<span style="background-color: #fff0f0;">'Authors'</span>]<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>split(<span style="background-color: #fff0f0;">u','</span>, expand<span style="color: #333333;">=</span><span style="color: #007020;">True</span>)
    split<span style="color: #333333;">.</span>columns <span style="color: #333333;">=</span> [<span style="background-color: #fff0f0;">'Authors_split_{0}'</span><span style="color: #333333;">.</span>format(i)
                     <span style="color: #008800; font-weight: bold;">for</span> i <span style="color: black; font-weight: bold;">in</span> <span style="color: #007020;">range</span>(<span style="color: #007020;">len</span>(split<span style="color: #333333;">.</span>columns))]
   
    <span style="color: #888888;"># strip author names of whitespaces</span>
    <span style="color: #008800; font-weight: bold;">for</span> column <span style="color: black; font-weight: bold;">in</span> split:
        split[column] <span style="color: #333333;">=</span> split[column]<span style="color: #333333;">.</span>str<span style="color: #333333;">.</span>strip()

    <span style="color: #888888;"># each row contains authors of a paper</span>
    <span style="color: #888888;"># the row might contains NaNs, which is why we use dropna</span>
    <span style="color: #008800; font-weight: bold;">for</span> i <span style="color: black; font-weight: bold;">in</span> <span style="color: #007020;">range</span>(<span style="color: #007020;">len</span>(split)<span style="color: #333333;">-</span><span style="color: #0000dd; font-weight: bold;">1</span>):
        authorlist<span style="color: #333333;">.</span>append(<span style="color: #007020;">list</span>(split<span style="color: #333333;">.</span>iloc[i]<span style="color: #333333;">.</span>dropna()))


G <span style="color: #333333;">=</span> nx<span style="color: #333333;">.</span>Graph()

<span style="color: #888888;"># link each author to the other authors on each paper</span>
<span style="color: #008800; font-weight: bold;">for</span> <span style="color: #007020;">list</span> <span style="color: black; font-weight: bold;">in</span> authorlist:
    <span style="color: #008800; font-weight: bold;">for</span> pos, node1 <span style="color: black; font-weight: bold;">in</span> <span style="color: #007020;">enumerate</span>(<span style="color: #007020;">list</span>):
        <span style="color: #008800; font-weight: bold;">for</span> node2 <span style="color: black; font-weight: bold;">in</span> <span style="color: #007020;">list</span>[pos:]:
            <span style="color: #888888;"># there might be empty strings or whitespaces in the author list</span>
            <span style="color: #008800; font-weight: bold;">if</span> node1 <span style="color: #333333;">!=</span> <span style="background-color: #fff0f0;">u''</span> <span style="color: black; font-weight: bold;">and</span> node2 <span style="color: #333333;">!=</span> <span style="background-color: #fff0f0;">u''</span> <span style="color: black; font-weight: bold;">and</span> node1 <span style="color: #333333;">!=</span> <span style="background-color: #fff0f0;">u' '</span> <span style="color: black; font-weight: bold;">and</span> node2 <span style="color: #333333;">!=</span> <span style="background-color: #fff0f0;">u' '</span>:
                G<span style="color: #333333;">.</span>add_edge(node1, node2)

<span style="color: #888888;"># label each node with the author's name</span>
<span style="color: #008800; font-weight: bold;">for</span> n <span style="color: black; font-weight: bold;">in</span> G:
    G<span style="color: #333333;">.</span>node[n][<span style="background-color: #fff0f0;">'name'</span>] <span style="color: #333333;">=</span> n

<span style="color: #888888;"># draw the graph using networkx's Graph object</span>
pos <span style="color: #333333;">=</span> nx<span style="color: #333333;">.</span>spring_layout(G)
nx<span style="color: #333333;">.</span>draw_networkx_nodes(G, pos, node_size<span style="color: #333333;">=</span><span style="color: #0000dd; font-weight: bold;">100</span>, node_color<span style="color: #333333;">=</span><span style="background-color: #fff0f0;">'blue'</span>)
nx<span style="color: #333333;">.</span>draw_networkx_edges(G, pos, edge_color<span style="color: #333333;">=</span><span style="background-color: #fff0f0;">'green'</span>)
nx<span style="color: #333333;">.</span>draw_networkx_labels(G, pos, font_color<span style="color: #333333;">=</span><span style="background-color: #fff0f0;">'red'</span>)

<span style="color: #888888;"># convert the Graph object into a JSON object</span>
<span style="color: #888888;"># we use the JSON object using D3</span>
d <span style="color: #333333;">=</span> json_graph<span style="color: #333333;">.</span>node_link_data(G)
json<span style="color: #333333;">.</span>dump(d, <span style="color: #007020;">open</span>(<span style="background-color: #fff0f0;">'force.json'</span>, <span style="background-color: #fff0f0;">'w'</span>))
</pre>
</td></tr>
</tbody></table>
</div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/rahulporuri/physics-iitm">physics@iitm</a> is maintained by <a href="https://github.com/rahulporuri">rahulporuri</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>
    </section>
  </body>
</html>
